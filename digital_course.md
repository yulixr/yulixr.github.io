## База по определениям
### Определение
**Веб-аналитика** — система измерения, сбора, анализа, визуализации и интерпретации информации о продвижении пользователя по воронке продаж с целью ее улучшения и оптимизации.

**Интернет** — сеть, построенная на базе стека протоколов TCP/IP.
**Веб** — сервис, построенный на основе этой инфраструктуры.
### Пример работы на пицце
Пиццерия — сервер. Мой дом — клиент.
1. Интернет подключение (позволяет принимать и отправлять данные по сети) = телефон, при помощи которого связался с пиццерией
2. TCP/IP (протокол управления передачей и интернет протокол) — коммуникационные протоколы, которые определяют каким образом данные должны передаваться по сети = служба доставки, которая заберет пиццу и привезет ее домой
3. DNS = поиск моего адреса курьером
4. HTTP — система правил, которая определяет язык для клиентов и серверов = язык, на котором был сделан заказ
5. Файлы компонентов — сайт состоит из нескольких файлов, которые подобны ингридиентам пиццы:
   - HTML
   - CSS (каскадные таблицы стилей)
   - JavaSctipy 
   - Материалы (изображения, файлы, видео)
### Что такое аналитический счетчик и как работает
1. **Анализаторы серверных логов** — используют серверную статистику посещаемости (анализ записей из логов), но это стрем
2. **JavaScript-счетчики или клиентские системы статистики** — код, устанавливаемый на все стр сайта, который подгружает скрипт владельца аналитической системы. Внешний сервер считает количество загрузок информера и получает доп. инфу.

### Как пользователи попадают на сайт
#видырекламы
- **Переходы из поисковых систем** — бесплатный + основной
- **Контекстная реклама** — переходы из поисковых систем, но платные
- **Переходы из социальных сетей** 
- **Таргетированная реклама** — переходы из соцсетей, но платные
- **Реферальные переходы** — переходы по ссылкам с других сайтов
- **С почтовых рассылок**

### Органический поиск
**Поисковая система** (google, yandex, mail) состоит из:
- Поисковый робот — программа, сканирующая сайты и собирающая инфу
- Индексатор — быстрый поиск по собранной инфе
- Поисковик — графический интерфейс
### Контекстная реклама
Бывает неск видов:
1. Поисковая реклама
   Это когда гуглим, и нам выпадают рекламные объявления первыми
2. Тематическая реклама
   На сайтах партнерах, которые входят в рекламную сеть яндекса (РСЯ) и контекстно-медийню сеть (КМС) гугл
   Показывается на стр, тематика которых связана с запросами пользователя
3. Поведенческая реклама
   Встречаем рекламу по тематике, которую искали час назад
4. Ретаргетинг
   Показ рекламы пользователям, которые посетили сайт, но не сделали целевых действий
### Таргетированная реклама
Она находит пользователей по опр. критериям, а не запросам. То есть мы руками настраиваем кому будем показывать.
### Реферальный трафик
Например, ты изучал сайт с отзывами на стальные двери и один из посетителей поделился ссылкой магазина, на котором он их приобрел. Твой переход в таком случае будет учтен как реферальный.
## Веб-аналитика старт
### Как собираются данные
Пользователь открыл стр — вызвался код счетчика — все действия пользователя + инфа о заголовках + урл собираются в пакет #хит  — отпр на сервер
**Модель сбора данных учитывает:**
- Пользователей
- Сеансы
- Взаимодействия
**Хиты** объединяются в #сеанс. 
Сеанс:
- Начинается когда откр стр
- Заканч через 30 мин бездействия ИЛИ в полночь ИЛИ при смене рекламной камп/канала трафик (то есть если я перешла с одной рекламы, случайно закрыла, и перешла прямым переходом это два разных сеанса)
#### Показатели
#пользователи — количество уникальных client id посетивших сайт
#число_показов — количество показов объявлений в рекламной сети
#число_кликов — число переходов на сайт по объявления из рекламы
#стоимость — сумма, выплаченная за клики по объявлениям
#входы — количество посещений сайта, которые начались с указанной страницы
#просмотры_страниц — посещения одной страницы:
- Вход —> [просмотр1, просмотр2, просмотр3, просмотр2] ЭТО СЕАНС —> выход
#уникальные_просмотры_страниц — колво посещений, во время которых хотя бы раз были просмотрены указанные страницы. в примере выше у стр 2 два просмотра, один уникальный
#процент_выходов — процент просмотров опр страницы, которые оказались последними в сеансе
#показатель_отказов — число сеансов, в ходе которых пользователи посмотрели только страницу входа / общ количество сеансов, начавшихся с этой стр
#средняя_длительность_сеанса — суммарная длительность пребывания пользователя на сайте / кол-во сеансов
#### Параметры
#источник — последний ресурс, который посетил пользователь перед переходом на сайт
#канал — тип источника (organic/refferral/cpc)
#источник/канал — информацию об источнике и канале трафика одновременно
#кампания — назв кампании направляющей на сайт
### Что такое цели и события
#### Цели #цели
Это идентификатор эффективности сайта. Может стать любая конверсия
Например для гугла цели:

| /                            | /                                                          |
| ---------------------------- | ---------------------------------------------------------- |
| Целевая страница             | Загрузка определенной страницы сайта или экрана приложения |
| Продолжительность            | Сеансы с заданной продолжительностью                       |
| Страниц/экранов за посещение | Просмотр опр числа стр или экр                             |
| Событие                      | Выполнено опр. действие (подписка/клик на баннер)          |
Для яндекса:

| /                     | /                                                            |
| --------------------- | ------------------------------------------------------------ |
| Количество просмотров | Просмотр определенного числа страниц сайта                   |
| Посещение страниц     | Просмотр заданных страниц сайта                              |
| JavaScript-событие    | Информация о достижении цели передается с помощью JavaScript |
| Составная цель        | Сочетает в себе перечисленные выше типы целей                |
#### События #события
При помощи них отслеживают пользовательские взаим с контентом сайта. Загрузка доков/клик по баннерам/отправка заявок.
Имеет следующую структуру:
- Категория — схожие типы событий объед в категории
- Действие — обозначение отслеживаемого события или взаимодействия
- Ярлык label — доп. инфа для отслеживания
- Ценность value — это целые числа
### GTM
GTM — диспетчер тегов. Содержит:
- Теги — фрагменты кода, которые хотим активировать на сайте
- Триггеры — условия активации тега
- Пременные
Совокупность трех — контейнер. 
#### Что такое теги
#тег — часть кода, которая собирает маркетинговые данные на сайте, а затем пересылает их в другие сервисы.
#### Что такое триггеры
#триггер — условие срабатывания тега
два вида:
- Триггер активации — при котором тег срабатывает
  - Встроенные триггеры — уже настроенные
  - Пользовательские — можно самому
- Триггер блокировки — исключение, при котором тег работать не будет
Наиболее популярные:
- Просмотр страниц
- Клики (при клике на заданный атрибут или ссылку)
- Пользовательские события
#### DataLayer
#datalayer — название JS-объекта, который служит для передачи данных, необходимых для работы GTM в виде пар ключ-значение

